var wch=function(i,e){var c=/complete|loaded|interactive/;var g=/^#([\w-]+)$/;var h=/^\.([\w-]+)$/;var k=/^[\w-]+$/;var a=/translate(?:3d)?\((.+?)\)/;var l=/matrix(3d)?\((.+?)\)/;var f=function(m,n){n=n||i;if(!m){return d()}if(typeof m==="object"){if(f.isArrayLike(m)){return d(f.slice.call(m),null)}else{return d([m],null)}}if(typeof m==="function"){return f.ready(m)}if(typeof m==="string"){try{m=m.trim();if(g.test(m)){var o=i.getElementById(RegExp.$1);return d(o?[o]:[])}return d(f.qsa(m,n),m)}catch(p){}}return d()};var d=function(n,m){n=n||[];Object.setPrototypeOf(n,f.fn);n.selector=m||"";return n};f.uuid=0;f.data={};f.extend=function(){var v,o,m,n,s,t,r=arguments[0]||{},q=1,p=arguments.length,u=false;if(typeof r==="boolean"){u=r;r=arguments[q]||{};q++}if(typeof r!=="object"&&!f.isFunction(r)){r={}}if(q===p){r=this;q--}for(;q<p;q++){if((v=arguments[q])!=null){for(o in v){m=r[o];n=v[o];if(r===n){continue}if(u&&n&&(f.isPlainObject(n)||(s=f.isArray(n)))){if(s){s=false;t=m&&f.isArray(m)?m:[]}else{t=m&&f.isPlainObject(m)?m:{}}r[o]=f.extend(u,t,n)}else{if(n!==e){r[o]=n}}}}}return r};f.noop=function(){};f.slice=[].slice;f.filter=[].filter;f.type=function(m){return m==null?String(m):j[{}.toString.call(m)]||"object"};f.isArray=Array.isArray||function(m){return m instanceof Array};f.isArrayLike=function(o){var n=!!o&&"length" in o&&o.length;var m=f.type(o);if(m==="function"||f.isWindow(o)){return false}return m==="array"||n===0||typeof n==="number"&&n>0&&n-1 in o};f.isWindow=function(m){return m!=null&&m===m.window};f.isObject=function(m){return f.type(m)==="object"};f.isPlainObject=function(m){return f.isObject(m)&&!f.isWindow(m)&&Object.getPrototypeOf(m)===Object.prototype};f.isEmptyObject=function(n){for(var m in n){if(m!==e){return false}}return true};f.isFunction=function(m){return f.type(m)==="function"};f.qsa=function(m,n){n=n||i;return f.slice.call(h.test(m)?n.getElementsByClassName(RegExp.$1):k.test(m)?n.getElementsByTagName(m):n.querySelectorAll(m))};f.ready=function(m){if(c.test(i.readyState)){m(f)}else{i.addEventListener("DOMContentLoaded",function(){m(f)},false)}return this};f.buffer=function(o,m,n){var s;var p=0;var r=0;var m=m||150;function q(){if(s){s.cancel();s=0}p=f.now();o.apply(n||this,arguments);r=f.now()}return f.extend(function(){if(!p||r>=p&&f.now()-r>m||r<p&&f.now()-p>m*8){q()}else{if(s){s.cancel()}s=f.later(q,m,null,arguments)}},{stop:function(){if(s){s.cancel();s=0}}})};f.each=function(o,p,n){if(!o){return this}if(typeof o.length==="number"){[].every.call(o,function(r,q){return p.call(r,q,r)!==false})}else{for(var m in o){if(n){if(o.hasOwnProperty(m)){if(p.call(o[m],m,o[m])===false){return o}}}else{if(p.call(o[m],m,o[m])===false){return o}}}}return this};f.focus=function(m){if(f.os.ios){setTimeout(function(){m.focus()},10)}else{m.focus()}};f.trigger=function(n,m,o){n.dispatchEvent(new CustomEvent(m,{detail:o,bubbles:true,cancelable:true}));return this};f.getStyles=function(m,o){var n=m.ownerDocument.defaultView.getComputedStyle(m,null);if(o){return n.getPropertyValue(o)||n[o]}return n};f.parseTranslate=function(o,n){var m=o.match(a||"");if(!m||!m[1]){m=["","0,0,0"]}m=m[1].split(",");m={x:parseFloat(m[0]),y:parseFloat(m[1]),z:parseFloat(m[2])};if(n&&m.hasOwnProperty(n)){return m[n]}return m};f.parseTranslateMatrix=function(q,n){var o=q.match(l);var p=o&&o[1];if(o){o=o[2].split(",");if(p==="3d"){o=o.slice(12,15)}else{o.push(0);o=o.slice(4,7)}}else{o=[0,0,0]}var m={x:parseFloat(o[0]),y:parseFloat(o[1]),z:parseFloat(o[2])};if(n&&m.hasOwnProperty(n)){return m[n]}return m};f.hooks={};f.addAction=function(n,o){var m=f.hooks[n];if(!m){m=[]}o.index=o.index||1000;m.push(o);m.sort(function(q,p){return q.index-p.index});f.hooks[n]=m;return f.hooks[n]};f.doAction=function(m,n){if(f.isFunction(n)){f.each(f.hooks[m],n)}else{f.each(f.hooks[m],function(o,p){return !p.handle()})}};f.later=function(q,o,p,u){o=o||0;var n=q;var v=u;var t;var s;if(typeof q==="string"){n=p[q]}t=function(){n.apply(p,f.isArray(v)?v:[v])};s=setTimeout(t,o);return{id:s,cancel:function(){clearTimeout(s)}}};f.now=Date.now||function(){return +new Date()};var j={};f.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(n,m){j["[object "+m+"]"]=m.toLowerCase()});if(window.JSON){f.parseJSON=JSON.parse}f.fn={each:function(m){[].every.call(this,function(o,n){return m.call(o,n,o)!==false});return this}};if(typeof define==="function"&&define.amd){define("wch",[],function(){return f})}return f}(document);(function(d,c){function a(f){this.os={};var e=[function(){var g=f.match(/(MicroMessenger)\/([\d\.]+)/i);if(g){this.os.wechat={version:g[2].replace(/_/g,".")}}return false},function(){var g=f.match(/(Android);?[\s\/]+([\d.]+)?/);if(g){this.os.android=true;this.os.version=g[2];this.os.isBadAndroid=!/Chrome\/\d/.test(c.navigator.appVersion)}return this.os.android===true},function(){var h=f.match(/(iPhone\sOS)\s([\d_]+)/);if(h){this.os.ios=this.os.iphone=true;this.os.version=h[2].replace(/_/g,".")}else{var g=f.match(/(iPad).*OS\s([\d_]+)/);if(g){this.os.ios=this.os.ipad=true;this.os.version=g[2].replace(/_/g,".")}}return this.os.ios===true}];[].every.call(e,function(g){return !g.call(d)})}a.call(d,navigator.userAgent)})(wch,window);(function(g){if("ontouchstart" in window){g.isTouchable=true;g.EVENT_START="touchstart";g.EVENT_MOVE="touchmove";g.EVENT_END="touchend"}else{g.isTouchable=false;g.EVENT_START="mousedown";g.EVENT_MOVE="mousemove";g.EVENT_END="mouseup"}g.EVENT_CANCEL="touchcancel";g.EVENT_CLICK="click";var a=1;var h={};var j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};var f=function(){return true};var e=function(){return false};var i=function(n,o){if(!n.detail){n.detail={currentTarget:o}}else{n.detail.currentTarget=o}g.each(j,function(q,p){var r=n[q];n[q]=function(){this[p]=f;return r&&r.apply(n,arguments)};n[p]=e},true);return n};var k=function(n){return n&&(n._mid||(n._mid=a++))};var d={};var l=function(o,p,n,q){return function(v){var s=h[o._mid][p];var w=[];var u=v.target;var r={};for(;u&&u!==document;u=u.parentNode){if(u===o){break}if(~["click","tap","doubletap","longtap","hold"].indexOf(p)&&(u.disabled||u.classList.contains("wch-disabled"))){break}var t={};g.each(s,function(x,y){r[x]||(r[x]=g.qsa(x,o));if(r[x]&&~r[x].indexOf(u)){if(!t[x]){t[x]=y}}},true);if(!g.isEmptyObject(t)){w.push({element:u,handlers:t})}}r=null;v=i(v);g.each(w,function(x,z){u=z.element;var y=u.tagName;if(p==="tap"&&y!=="INPUT"&&y!=="TEXTAREA"&&y!=="SELECT"){v.preventDefault();v.detail&&v.detail.gesture&&v.detail.gesture.preventDefault()}g.each(z.handlers,function(A,B){g.each(B,function(C,D){if(D.call(u,v)===false){v.preventDefault();v.stopPropagation()}},true)},true);if(v.isPropagationStopped()){return false}},true)}};var c=function(p,q){var o=d[k(p)];var n=[];if(o){n=[];if(q){var r=function(s){return s.type===q};return o.filter(r)}else{n=o}}return n};var m=/^(INPUT|TEXTAREA|BUTTON|SELECT)$/;g.fn.on=function(o,n,p){return this.each(function(){var w=this;k(w);k(p);var r=false;var t=h[w._mid]||(h[w._mid]={});var v=t[o]||(t[o]={});if(g.isEmptyObject(v)){r=true}var u=v[n]||(v[n]=[]);u.push(p);if(r){var s=d[k(w)];if(!s){s=[]}var q=l(w,o,n,p);s.push(q);q.i=s.length-1;q.type=o;d[k(w)]=s;w.addEventListener(o,q);if(o==="tap"){w.addEventListener("click",function(z){if(z.target){var y=z.target.tagName;if(!m.test(y)){if(y==="A"){var x=z.target.href;if(!(x&&~x.indexOf("tel:"))){z.preventDefault()}}else{z.preventDefault()}}}})}}})};g.fn.off=function(o,n,p){return this.each(function(){var r=k(this);if(!o){h[r]&&delete h[r]}else{if(!n){h[r]&&delete h[r][o]}else{if(!p){h[r]&&h[r][o]&&delete h[r][o][n]}else{var q=h[r]&&h[r][o]&&h[r][o][n];g.each(q,function(t,s){if(k(s)===k(p)){q.splice(t,1);return false}},true)}}}if(h[r]){if(!h[r][o]||g.isEmptyObject(h[r][o])){c(this,o).forEach(function(s){this.removeEventListener(s.type,s);delete d[r][s.i]}.bind(this))}}else{c(this).forEach(function(s){this.removeEventListener(s.type,s);delete d[r][s.i]}.bind(this))}})}})(wch);(function(d,c,a){d.targets={};d.targetHandles=[];d.registerTarget=function(e){e.index=e.index||1000;d.targetHandles.push(e);d.targetHandles.sort(function(g,f){return g.index-f.index});return d.targetHandles};c.addEventListener(d.EVENT_START,function(f){var g=f.target;var e={};for(;g&&g!==a;g=g.parentNode){var h=false;d.each(d.targetHandles,function(j,k){var i=k.name;if(!h&&!e[i]&&k.hasOwnProperty("handle")){d.targets[i]=k.handle(f,g);if(d.targets[i]){e[i]=true;if(k.isContinue!==true){h=true}}}else{if(!e[i]){if(k.isReset!==false){d.targets[i]=false}}}});if(h){break}}});c.addEventListener("click",function(e){var f=e.target;var g=false;for(;f&&f!==a;f=f.parentNode){if(f.tagName==="A"){d.each(d.targetHandles,function(i,j){var h=j.name;if(j.hasOwnProperty("handle")){if(j.handle(e,f)){g=true;e.preventDefault();return false}}});if(g){break}}}})})(wch,window,document);(function(a){if(String.prototype.trim===a){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}Object.setPrototypeOf=Object.setPrototypeOf||function(d,c){d.__proto__=c;return d}})();(function(a){a.namespace="wch";a.classNamePrefix=a.namespace+"-";a.classSelectorPrefix="."+a.classNamePrefix;a.className=function(c){return a.classNamePrefix+c};a.classSelector=function(c){return c.replace(/\./g,a.classSelectorPrefix)};a.eventName=function(d,c){return d+(a.namespace?"."+a.namespace:"")+(c?"."+c:"")}})(wch);(function(g,l){g.gestures={session:{}};g.preventDefault=function(D){D.preventDefault()};g.stopPropagation=function(D){D.stopPropagation()};g.addGesture=function(D){return g.addAction("gestures",D)};var w=Math.round;var p=Math.abs;var A=Math.sqrt;var i=Math.atan;var e=Math.atan2;var c=function(G,F,E){if(!E){E=["x","y"]}var D=F[E[0]]-G[E[0]];var H=F[E[1]]-G[E[1]];return A(D*D+H*H)};var m=function(F,D){if(F.length>=2&&D.length>=2){var E=["pageX","pageY"];return c(D[1],D[0],E)/c(F[1],F[0],E)}return 1};var h=function(G,F,E){if(!E){E=["x","y"]}var D=F[E[0]]-G[E[0]];var H=F[E[1]]-G[E[1]];return e(H,D)*180/Math.PI};var d=function(D,E){if(D===E){return""}if(p(D)>=p(E)){return D>0?"left":"right"}return E>0?"up":"down"};var q=function(F,D){var E=["pageX","pageY"];return h(D[1],D[0],E)-h(F[1],F[0],E)};var j=function(E,D,F){return{x:D/E||0,y:F/E||0}};var y=function(D,E){if(g.gestures.stoped){return}g.doAction("gestures",function(F,G){if(!g.gestures.stoped){if(g.options.gestureConfig[G.name]!==false){G.handle(D,E)}}})};var x=function(E,D){while(E){if(E==D){return true}E=E.parentNode}return false};var f=function(K,H,G){var F=[];var D=[];var E=0;while(E<K.length){var J=H?K[E][H]:K[E];if(D.indexOf(J)<0){F.push(K[E])}D[E]=J;E++}if(G){if(!H){F=F.sort()}else{F=F.sort(function I(M,L){return M[H]>L[H]})}}return F};var k=function(G){var E=G.length;if(E===1){return{x:w(G[0].pageX),y:w(G[0].pageY)}}var D=0;var H=0;var F=0;while(F<E){D+=G[F].pageX;H+=G[F].pageY;F++}return{x:w(D/E),y:w(H/E)}};var t=function(){return g.options.gestureConfig.pinch};var C=function(F){var E=[];var D=0;while(D<F.touches.length){E[D]={pageX:w(F.touches[D].pageX),pageY:w(F.touches[D].pageY)};D++}return{timestamp:g.now(),gesture:F.gesture,touches:E,center:k(F.touches),deltaX:F.deltaX,deltaY:F.deltaY}};var a=function(I){var G=g.gestures.session;var F=I.center;var H=G.offsetDelta||{};var E=G.prevDelta||{};var D=G.prevTouch||{};if(I.gesture.type===g.EVENT_START||I.gesture.type===g.EVENT_END){E=G.prevDelta={x:D.deltaX||0,y:D.deltaY||0};H=G.offsetDelta={x:F.x,y:F.y}}I.deltaX=E.x+(F.x-H.x);I.deltaY=E.y+(F.y-H.y)};var r=function(K){var J=g.gestures.session;var I=K.touches;var F=I.length;if(!J.firstTouch){J.firstTouch=C(K)}if(t()&&F>1&&!J.firstMultiTouch){J.firstMultiTouch=C(K)}else{if(F===1){J.firstMultiTouch=false}}var H=J.firstTouch;var G=J.firstMultiTouch;var E=G?G.center:H.center;var D=K.center=k(I);K.timestamp=g.now();K.deltaTime=K.timestamp-H.timestamp;K.angle=h(E,D);K.distance=c(E,D);a(K);K.offsetDirection=d(K.deltaX,K.deltaY);K.scale=G?m(G.touches,I):1;K.rotation=G?q(G.touches,I):0;s(K)};var v=25;var s=function(G){var I=g.gestures.session;var N=I.lastInterval||G;var H=G.timestamp-N.timestamp;var E;var L;var J;var K;if(G.gesture.type!=g.EVENT_CANCEL&&(H>v||N.velocity===undefined)){var F=N.deltaX-G.deltaX;var D=N.deltaY-G.deltaY;var M=j(H,F,D);L=M.x;J=M.y;E=p(M.x)>p(M.y)?M.x:M.y;K=d(F,D)||N.direction;I.lastInterval=G}else{E=N.velocity;L=N.velocityX;J=N.velocityY;K=N.direction}G.velocity=E;G.velocityX=L;G.velocityY=J;G.direction=K};var o={};var n=function(E){for(var D=0;D<E.length;D++){!E.identifier&&(E.identifier=0)}return E};var u=function(D,I){var H=n(g.slice.call(D.touches||[D]));var L=D.type;var K=[];var N=[];if((L===g.EVENT_START||L===g.EVENT_MOVE)&&H.length===1){o[H[0].identifier]=true;K=H;N=H;I.target=D.target}else{var J=0;var K=[];var N=[];var M=n(g.slice.call(D.changedTouches||[D]));I.target=D.target;var F=g.gestures.session.target||D.target;K=H.filter(function(O){return x(O.target,F)});if(L===g.EVENT_START){J=0;while(J<K.length){o[K[J].identifier]=true;J++}}J=0;while(J<M.length){if(o[M[J].identifier]){N.push(M[J])}if(L===g.EVENT_END||L===g.EVENT_CANCEL){delete o[M[J].identifier]}J++}if(!N.length){return false}}K=f(K.concat(N),"identifier",true);var E=K.length;var G=N.length;if(L===g.EVENT_START&&E-G===0){I.isFirst=true;g.gestures.touch=g.gestures.session={target:D.target}}I.isFinal=(L===g.EVENT_END||L===g.EVENT_CANCEL)&&E-G===0;I.touches=K;I.changedTouches=N;return true};var z=function(D){var F={gesture:D};var E=u(D,F);if(!E){return}r(F);y(D,F);g.gestures.session.prevTouch=F;if(D.type===g.EVENT_END&&!g.isTouchable){g.gestures.touch=g.gestures.session={}}};l.addEventListener(g.EVENT_START,z);l.addEventListener(g.EVENT_MOVE,z);l.addEventListener(g.EVENT_END,z);l.addEventListener(g.EVENT_CANCEL,z);l.addEventListener(g.EVENT_CLICK,function(D){if((g.os.android||g.os.ios)&&(g.targets.popover&&D.target===g.targets.popover||g.targets.tab||g.targets.offcanvas||g.targets.modal)){D.preventDefault()}},true);g.isScrolling=false;var B=null;l.addEventListener("scroll",function(){g.isScrolling=true;B&&clearTimeout(B);B=setTimeout(function(){g.isScrolling=false},250)})})(wch,window);(function(f,c){var d;var a;var e=function(h,k){var j=f.gestures.session;var g=this.options;switch(h.type){case f.EVENT_END:if(!k.isFinal){return}var i=j.target;if(!i||i.disabled||i.classList&&i.classList.contains("wch-disabled")){return}if(k.distance<g.tapMaxDistance&&k.deltaTime<g.tapMaxTime){if(f.options.gestureConfig.doubletap&&d&&d===i){if(a&&k.timestamp-a<g.tapMaxInterval){f.trigger(i,"doubletap",k);a=f.now();d=i;return}}f.trigger(i,c,k);a=f.now();d=i}break}};f.addGesture({name:c,index:30,handle:e,options:{fingers:1,tapMaxInterval:300,tapMaxDistance:5,tapMaxTime:250}})})(wch,"tap");(function(f){f.global=f.options={gestureConfig:{tap:true,doubletap:false,longtap:false,hold:false,flick:true,swipe:true,drag:true,pinch:false}};f.initGlobal=function(g){f.options=f.extend(true,f.global,g);return this};var e={};var d=false;f.init=function(g){d=true;f.options=f.extend(true,f.global,g||{});f.ready(function(){f.doAction("inits",function(h,i){var j=!!(!e[i.name]||i.repeat);if(j){i.handle.call(f);e[i.name]=true}})});return this};f.addInit=function(g){return f.addAction("inits",g)};f.addInit({name:"iframe",index:100,handle:function(){var g=f.options;var h=g.subpages||[];if(!f.os.plus&&h.length){a(h[0])}}});var a=function(g){var j=document.createElement("div");j.className="wch-iframe-wrapper";var i=g.styles||{};if(typeof i.top!=="string"){i.top="0px"}if(typeof i.bottom!=="string"){i.bottom="0px"}j.style.top=i.top;j.style.bottom=i.bottom;var h=document.createElement("iframe");h.src=g.url;h.id=g.id||g.url;h.name=h.id;j.appendChild(h);document.body.appendChild(j);f.os.wechat&&c(j,h)};function c(j,h){var g="wch_SCROLL_POSITION_"+document.location.href+"_"+h.src;var i=parseFloat(localStorage.getItem(g))||0;if(i){(function(k){h.onload=function(){window.scrollTo(0,k)}})(i)}setInterval(function(){var k=window.scrollY;if(i!==k){localStorage.setItem(g,k+"");i=k}},100)}f(function(){var h=document.body.classList;var g=[];if(f.os.ios){g.push({os:"ios",version:f.os.version});h.add("wch-ios")}else{if(f.os.android){g.push({os:"android",version:f.os.version});h.add("wch-android")}}if(f.os.wechat){g.push({os:"wechat",version:f.os.wechat.version});h.add("wch-wechat")}if(g.length){f.each(g,function(k,l){var j="";var i=[];if(l.version){f.each(l.version.split("."),function(n,m){j=j+(j?"-":"")+m;h.add(f.className(l.os+"-"+j))})}})}})})(wch);(function(e){var c=false,d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;var a=function(){};a.extend=function(j){var i=this.prototype;c=true;var h=new this();c=false;for(var g in j){h[g]=typeof j[g]=="function"&&typeof i[g]=="function"&&d.test(j[g])?function(k,l){return function(){var n=this._super;this._super=i[k];var m=l.apply(this,arguments);this._super=n;return m}}(g,j[g]):j[g]}function f(){if(!c&&this.init){this.init.apply(this,arguments)}}f.prototype=h;f.prototype.constructor=f;f.extend=arguments.callee;return f};e.Class=a})(wch);(function(f,m,p,x){var o="wch-popover";var u="wch-popover-arrow";var g="wch-popover-action";var a="wch-backdrop";var v="wch-bar-popover";var k="wch-bar-backdrop";var w="wch-backdrop-action";var e="wch-active";var i="wch-bottom";var t=function(y,z){if(z.tagName==="A"&&z.hash){f.targets._popover=p.getElementById(z.hash.replace("#",""));if(f.targets._popover&&f.targets._popover.classList.contains(o)){return z}else{f.targets._popover=null}}return false};f.registerTarget({name:x,index:60,handle:t,target:false,isReset:false,isContinue:true});var n=function(y){};var h=function(y){this.removeEventListener("webkitTransitionEnd",h);this.addEventListener(f.EVENT_MOVE,f.preventDefault);f.trigger(this,"shown",this)};var l=function(y){d(this,"none");this.removeEventListener("webkitTransitionEnd",l);this.removeEventListener(f.EVENT_MOVE,f.preventDefault);n(false);f.trigger(this,"hidden",this)};var q=function(){var y=p.createElement("div");y.classList.add(a);y.addEventListener(f.EVENT_MOVE,f.preventDefault);y.addEventListener("tap",function(A){var z=f.targets._popover;if(z){z.addEventListener("webkitTransitionEnd",l);z.classList.remove(e);c(z);p.body.setAttribute("style","")}});return y}();var s;var c=function(y){q.setAttribute("style","opacity:0");f.targets.popover=f.targets._popover=null;s=f.later(function(){if(!y.classList.contains(e)&&q.parentNode&&q.parentNode===p.body){p.body.removeChild(q)}},350)};m.addEventListener("tap",function(A){if(!f.targets.popover){return}var y=false;var z=A.target;for(;z&&z!==p;z=z.parentNode){if(z===f.targets.popover){y=true}}if(y){A.detail.gesture.preventDefault();j(f.targets._popover,f.targets.popover)}});var j=function(C,z,B){if(B==="show"&&C.classList.contains(e)||B==="hide"&&!C.classList.contains(e)){return}s&&s.cancel();C.removeEventListener("webkitTransitionEnd",h);C.removeEventListener("webkitTransitionEnd",l);q.classList.remove(k);q.classList.remove(w);var A=p.querySelector(".wch-popover.wch-active");if(A){A.addEventListener("webkitTransitionEnd",l);A.classList.remove(e);if(C===A){c(A);return}}var y=false;if(C.classList.contains(v)||C.classList.contains(g)){if(C.classList.contains(g)){y=true;q.classList.add(w)}else{q.classList.add(k)}}d(C,"block");C.offsetHeight;C.classList.add(e);q.setAttribute("style","");p.body.appendChild(q);n(true);r(C,z,y);q.classList.add(e);C.addEventListener("webkitTransitionEnd",h)};var d=function(z,C,B,A){var y=z.style;if(typeof C!=="undefined"){y.display=C}if(typeof B!=="undefined"){y.top=B+"px"}if(typeof A!=="undefined"){y.left=A+"px"}};var r=function(C,G,N){if(!C||!G){return}if(N){d(C,"block");return}var K=m.innerWidth;var F=m.innerHeight;var M=C.offsetWidth;var E=C.offsetHeight;var O=G.offsetWidth;var B=G.offsetHeight;var D=f.offset(G);var y=C.querySelector("."+u);if(!y){y=p.createElement("div");y.className=u;C.appendChild(y)}var L=y&&y.offsetWidth/2||0;var J=0;var I=0;var H=0;var z=0;var A=C.classList.contains(g)?0:5;var P="top";if(E+L<D.top-m.pageYOffset){J=D.top-E-L}else{if(E+L<F-(D.top-m.pageYOffset)-B){P="bottom";J=D.top+B+L}else{P="middle";J=Math.max((F-E)/2+m.pageYOffset,0);I=Math.max((K-M)/2+m.pageXOffset,0)}}if(P==="top"||P==="bottom"){I=O/2+D.left-M/2;H=I;if(I<A){I=A}if(I+M>K){I=K-M-A}if(y){if(P==="top"){y.classList.add(i)}else{y.classList.remove(i)}H=H-I;z=M/2-L/2+H;z=Math.max(Math.min(z,M-L*2-6),6);y.setAttribute("style","left:"+z+"px")}}else{if(P==="middle"){y.setAttribute("style","display:none")}}d(C,"block",J,I)};f.createMask=function(A){var z=p.createElement("div");z.classList.add(a);z.addEventListener(f.EVENT_MOVE,f.preventDefault);z.addEventListener("tap",function(){y.close()});var y=[z];y._show=false;y.show=function(){y._show=true;z.setAttribute("style","opacity:1");p.body.appendChild(z);return y};y._remove=function(){if(y._show){y._show=false;z.setAttribute("style","opacity:0");f.later(function(){var B=p.body;z.parentNode===B&&B.removeChild(z)},350)}return y};y.close=function(){if(A){if(A()!==false){y._remove()}}else{y._remove()}};return y};f.fn.popover=function(){var y=arguments;this.each(function(){f.targets._popover=this;if(y[0]==="show"||y[0]==="hide"||y[0]==="toggle"){j(this,y[1],y[0])}})}})(wch,window,document,"popover");(function(h,i,k,d){var g=30;var j=90;var f=40;var e=10;var o=h.rad2deg=function(p){return p/(Math.PI/180)};var m=h.deg2rad=function(p){return p*(Math.PI/180)};var c=navigator.platform.toLowerCase();var n=navigator.userAgent.toLowerCase();var a=(n.indexOf("iphone")>-1||n.indexOf("ipad")>-1||n.indexOf("ipod")>-1)&&(c.indexOf("iphone")>-1||c.indexOf("ipad")>-1||c.indexOf("ipod")>-1);var l=h.Picker=function(r,q){var p=this;p.holder=r;p.options=q||{};p.init();p.initInertiaParams();p.calcElementItemPostion(true);p.bindEvent()};l.prototype.findElementItems=function(){var p=this;p.elementItems=[].slice.call(p.holder.querySelectorAll("li"));return p.elementItems};l.prototype.init=function(){var p=this;p.list=p.holder.querySelector("ul");p.findElementItems();p.height=p.holder.offsetHeight;p.r=p.height/2-e;p.d=p.r*2;p.itemHeight=p.elementItems.length>0?p.elementItems[0].offsetHeight:f;p.itemAngle=parseInt(p.calcAngle(p.itemHeight*0.8));p.hightlightRange=p.itemAngle/2;p.visibleRange=j;p.beginAngle=0;p.beginExceed=p.beginAngle-g;p.list.angle=p.beginAngle;if(a){p.list.style.webkitTransformOrigin="center center "+p.r+"px"}};l.prototype.calcElementItemPostion=function(q){var p=this;if(q){p.items=[]}p.elementItems.forEach(function(t){var s=p.elementItems.indexOf(t);p.endAngle=p.itemAngle*s;t.angle=p.endAngle;t.style.webkitTransformOrigin="center center -"+p.r+"px";t.style.webkitTransform="translateZ("+p.r+"px) rotateX("+-p.endAngle+"deg)";if(q){var r={};r.text=t.innerHTML||"";r.value=t.getAttribute("data-value")||r.text;p.items.push(r)}});p.endExceed=p.endAngle+g;p.calcElementItemVisibility(p.beginAngle)};l.prototype.calcAngle=function(u){var s=this;var p=b=parseFloat(s.r);u=Math.abs(u);var r=parseInt(u/s.d)*180;u=u%s.d;var t=(p*p+b*b-u*u)/(2*p*b);var q=r+o(Math.acos(t));return q};l.prototype.calcElementItemVisibility=function(q){var p=this;p.elementItems.forEach(function(r){var s=Math.abs(r.angle-q);if(s<p.hightlightRange){r.classList.add("highlight")}else{if(s<p.visibleRange){r.classList.add("visible");r.classList.remove("highlight")}else{r.classList.remove("highlight");r.classList.remove("visible")}}})};l.prototype.setAngle=function(q){var p=this;p.list.angle=q;p.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+q+"deg)";p.calcElementItemVisibility(q)};l.prototype.bindEvent=function(){var q=this;var r=0;var p=null;var s=false;q.holder.addEventListener(h.EVENT_START,function(t){s=true;t.preventDefault();q.list.style.webkitTransition="";p=(t.changedTouches?t.changedTouches[0]:t).pageY;r=q.list.angle;q.updateInertiaParams(t,true)},false);q.holder.addEventListener(h.EVENT_END,function(t){s=false;t.preventDefault();q.startInertiaScroll(t)},false);q.holder.addEventListener(h.EVENT_CANCEL,function(t){s=false;t.preventDefault();q.startInertiaScroll(t)},false);q.holder.addEventListener(h.EVENT_MOVE,function(v){if(!s){return}v.preventDefault();var u=(v.changedTouches?v.changedTouches[0]:v).pageY;var t=u-p;var x=q.calcAngle(t);var w=t>0?r-x:r+x;if(w>q.endExceed){w=q.endExceed}if(w<q.beginExceed){w=q.beginExceed}q.setAngle(w);q.updateInertiaParams(v)},false);q.list.addEventListener("tap",function(t){elementItem=t.target;if(elementItem.tagName=="LI"){q.setSelectedIndex(q.elementItems.indexOf(elementItem),200)}},false)};l.prototype.initInertiaParams=function(){var p=this;p.lastMoveTime=0;p.lastMoveStart=0;p.stopInertiaMove=false};l.prototype.updateInertiaParams=function(s,q){var r=this;var p=s.changedTouches?s.changedTouches[0]:s;if(q){r.lastMoveStart=p.pageY;r.lastMoveTime=s.timeStamp||Date.now();r.startAngle=r.list.angle}else{var t=s.timeStamp||Date.now();if(t-r.lastMoveTime>300){r.lastMoveTime=t;r.lastMoveStart=p.pageY}}r.stopInertiaMove=true};l.prototype.startInertiaScroll=function(p){var B=this;var y=p.changedTouches?p.changedTouches[0]:p;var z=p.timeStamp||Date.now();var A=(y.pageY-B.lastMoveStart)/(z-B.lastMoveTime);var r=A>0?-1:1;var w=r*0.0006*-1;var s=Math.abs(A/w);var x=A*s/2;var u=B.list.angle;var t=B.calcAngle(x)*r;var q=t;if(u+t<B.beginExceed){t=B.beginExceed-u;s=s*(t/q)*0.6}if(u+t>B.endExceed){t=B.endExceed-u;s=s*(t/q)*0.6}if(t==0){B.endScroll();return}B.scrollDistAngle(z,u,t,s)};l.prototype.scrollDistAngle=function(r,q,t,s){var p=this;p.stopInertiaMove=false;(function(x,u,A,y){var v=13;var B=y/v;var w=0;(function z(){if(p.stopInertiaMove){return}var C=p.quartEaseOut(w,u,A,B);p.setAngle(C);w++;if(w>B-1||C<p.beginExceed||C>p.endExceed){p.endScroll();return}setTimeout(z,v)})()})(r,q,t,s)};l.prototype.quartEaseOut=function(q,p,s,r){return -s*((q=q/r-1)*q*q*q-1)+p};l.prototype.endScroll=function(){var p=this;if(p.list.angle<p.beginAngle){p.list.style.webkitTransition="150ms ease-out";p.setAngle(p.beginAngle)}else{if(p.list.angle>p.endAngle){p.list.style.webkitTransition="150ms ease-out";p.setAngle(p.endAngle)}else{var q=parseInt((p.list.angle/p.itemAngle).toFixed(0));p.list.style.webkitTransition="100ms ease-out";p.setAngle(p.itemAngle*q)}}p.triggerChange()};l.prototype.triggerChange=function(q){var p=this;setTimeout(function(){var r=p.getSelectedIndex();var s=p.items[r];if(h.trigger&&(r!=p.lastIndex||q===true)){h.trigger(p.holder,"change",{index:r,item:s})}p.lastIndex=r;typeof q==="function"&&q()},0)};l.prototype.correctAngle=function(q){var p=this;if(q<p.beginAngle){return p.beginAngle}else{if(q>p.endAngle){return p.endAngle}else{return q}}};l.prototype.setItems=function(s,r){var q=this;q.items=r||[];var p=[];q.items.forEach(function(v){if(v!==null&&v!==d){p.push("<li>"+(v.text||v)+"</li>")}});q.list.innerHTML=p.join("");q.findElementItems();q.calcElementItemPostion();if(s&&s!==d){for(var t in r){if(s.indexOf(r[t].text)>-1){var u=q.itemAngle*t;q.setAngle(q.correctAngle(u))}}}else{if(s===d){q.setAngle(q.correctAngle(q.list.angle))}else{q.setAngle(q.correctAngle(0))}}q.triggerChange(true)};l.prototype.getItems=function(){var p=this;return p.items};l.prototype.getSelectedIndex=function(){var p=this;return parseInt((p.list.angle/p.itemAngle).toFixed(0))};l.prototype.setSelectedIndex=function(q,r,u){var p=this;p.list.style.webkitTransition="";var t=p.correctAngle(p.itemAngle*q);if(r&&r>0){var s=t-p.list.angle;p.scrollDistAngle(Date.now(),p.list.angle,s,r)}else{p.setAngle(t)}p.triggerChange(u)};l.prototype.getSelectedItem=function(){var p=this;return p.items[p.getSelectedIndex()]};l.prototype.getSelectedValue=function(){var p=this;return(p.items[p.getSelectedIndex()]||{}).value};l.prototype.getSelectedText=function(){var p=this;return(p.items[p.getSelectedIndex()]||{}).text};l.prototype.setSelectedValue=function(s,t,u){var p=this;if(s==""){for(var q in p.items){var r=p.items[q];if(s.indexOf(r.text)>-1){p.setSelectedIndex(q,t,u);return}}}else{p.setItems(s,p.items)}};if(h.fn){h.fn.picker=function(p){this.each(function(t,s){if(s.picker){return}if(p){s.picker=new l(s,p)}else{var r=s.getAttribute("data-picker-options");var q=r?JSON.parse(r):{};s.picker=new l(s,q)}});return this[0]?this[0].picker:null};h.ready(function(){h(".wch-picker").picker()})}})(window.wch||window,window,document,undefined);(function(f,a){f.dom=function(g){if(typeof g!=="string"){if(g instanceof Array||g[0]&&g.length){return[].slice.call(g)}else{return[g]}}if(!f.__create_dom_div__){f.__create_dom_div__=a.createElement("div")}f.__create_dom_div__.innerHTML=g;return[].slice.call(f.__create_dom_div__.childNodes)};var e='<div class="wch-poppicker"><div class="wch-poppicker-header"><a class="wch-btn wch-poppicker-btn-cancel">取消</a><a class="wch-btn wch-btn-blue wch-poppicker-btn-ok">确定</a><div class="wch-poppicker-clear"></div></div><div class="wch-poppicker-body"></div></div>';var c='<div class="wch-picker"><div class="wch-picker-inner"><div class="wch-pciker-rule wch-pciker-rule-ft"></div><ul class="wch-pciker-list"></ul><div class="wch-pciker-rule wch-pciker-rule-bg"></div></div></div>';var d=f.PopPicker=f.Class.extend({init:function(h){var g=this;g.options=h||{};g.tmpValue=h.deafultValue;g.options.buttons=g.options.buttons||["取消","确定"];g.clicked="ok";g.panel=f.dom(e)[0];a.body.appendChild(g.panel);g.ok=g.panel.querySelector(".wch-poppicker-btn-ok");g.cancel=g.panel.querySelector(".wch-poppicker-btn-cancel");g.body=g.panel.querySelector(".wch-poppicker-body");g.mask=f.createMask();g.cancel.innerText=g.options.buttons[0];g.ok.innerText=g.options.buttons[1];g.cancel.addEventListener("tap",function(i){if(g.tmpValue){g.options.deafultValue=g.tmpValue}g.clicked="cancel";g.hide()},false);g.ok.addEventListener("tap",function(j){g.tmpValue=undefined;if(g.callback){var i=g.callback(g.getSelectedItems());if(i!==false){g.clicked="ok";g.hide()}}},false);g.mask[0].addEventListener("tap",function(){if(g.tmpValue){g.options.deafultValue=g.tmpValue}g.clicked="cancel";g.hide()},false);g._createPicker();g.panel.addEventListener(f.EVENT_START,function(i){i.preventDefault()},false);g.panel.addEventListener(f.EVENT_MOVE,function(i){i.preventDefault()},false)},_createPicker:function(){var g=this;var k=g.options.layer||1;var l=100/k+"%";g.pickers=[];for(var j=1;j<=k;j++){var m=f.dom(c)[0];m.style.width=l;g.body.appendChild(m);var h=f(m).picker();g.pickers.push(h);m.addEventListener("change",function(n){var p=this.nextSibling;if(p&&p.picker){var i=n.detail||{};var o=i.item||{};p.picker.setItems(g.options.deafultValue,o.children)}},false)}},setData:function(h){var g=this;h=h||[];g.pickers[0].setItems(undefined,h)},getSelectedItems:function(){var h=this;var g=[];for(var k in h.pickers){var j=h.pickers[k];g.push(j.getSelectedItem()||{})}return g},show:function(h){var g=this;g.tmpValue=g.options.deafultValue;g.options.deafultValue="";g.callback=h;g.mask.show();a.body.classList.add(f.className("poppicker-active-for-page"));g.panel.classList.add(f.className("active"));g.__back=f.back;f.back=function(){g.hide()}},hide:function(){var g=this;if(g.disposed){return}g.panel.classList.remove(f.className("active"));g.mask.close();a.body.classList.remove(f.className("poppicker-active-for-page"));f.back=g.__back},dispose:function(){var g=this;g.hide();setTimeout(function(){g.panel.parentNode.removeChild(g.panel);for(var h in g){g[h]=null;delete g[h]}g.disposed=true},300)}})})(wch,document);
